# OpenAuburn v1 API specification

OpenAuburn provides an API for accessing its database. API requests are made to /v1/[dataset] with an HTTP GET request. All data is returned in JSON format.

[https://api.openauburn.org](https://api.openauburn.org/) is the base url for all endpoints.

## /v1/crimes

Crime reports on or around Auburn University’s campuses.

## /v1/fires

Fire reports on or around Auburn University’s campuses.

## /v1/datasets

Meta data for OpenAuburn's public datasets.

<br><br>

Explore all requests and dataset schemes at [https://api.openauburn.org/swagger/index.html](https://api.openauburn.org/swagger/index.html)

Autogenerated OpenAPI specification (JSON):

[https://api.openauburn.org/swagger/v1/swagger.json](https://api.openauburn.org/swagger/v1/swagger.json)

<br><br>

# Installation
OpenAuburn invites you to run our API locally to empower your own projects as well as build on our service. \
The following tutorial walks you through installing the API and configuring your development environment.

Note: We recommend you use Visual Studio for this tutorial. \
You may also see [Microsoft’s walkthrough for setting up ASP.NET web APIs](https://learn.microsoft.com/en-us/aspnet/core/tutorials/first-web-api?view=aspnetcore-6.0&tabs=visual-studio) for Visual Studio and VSCode.

<br>

## Installing code

Clone this repository in a safe directory. This will automatically create a new folder for this project.

```bash
git clone https://github.com/openauburn/api-v1.git
```

<br>

## Setting up Visual Studio

If you do not have Visual Studio, you may download the free community version [here](https://visualstudio.microsoft.com/vs/#download). \
During the installation, make sure you download the **ASP.NET and web development** workload.

After Visual Studio is installed and configured, select **“Open a project or solution”**. This will open up File Explorer.

<p align="center">
    <img height=300 src="https://raw.githubusercontent.com/openauburn/api-v1/master/docs/assets/install-opensolution.png">
</p>

Browse to the folder containing the clone of this repository. \
Continue to /OpenAuburnAPI and select the open-auburn-api.sln solution file. \
Click “Open” in File Explorer to open this solution file in Visual Studio.

<br>

## Installing Packages

Now that we have the solution opened, we need to ensure all of our packages are installed.

### Using dotnet CLI

Run the following commands in /OpenAuburnAPI (or where your open-auburn-api.sln is) to install the necessary packages:

```bash
dotnet add package Microsoft.AspNet.WebApi.WebHost

dotnet add package Microsoft.EntityFrameworkCore

dotnet add package Microsoft.EntityFrameworkCore.Design

dotnet add package Microsoft.EntityFrameworkCore.SqlServer

dotnet add package Microsoft.EntityFrameworkCore.Tools

dotnet add package Swashbuckle.ASPNetCore
```

### Using Visual Studio

Navigate to **Project** > **Manage NuGet Packages…**

<p align="center">
    <img height=400 src="https://raw.githubusercontent.com/openauburn/api-v1/master/docs/assets/install-projectpackages.png">
</p>

Install the required packages. **Browse** packages and search for / install the following:

- **Microsoft.AspNet.WebApi.WebHost**

- **Microsoft.EntityFrameworkCore**

- **Microsoft.EntityFrameworkCore.Design**

- **Microsoft.EntityFrameworkCore.SqlServer**

- **Microsoft.EntityFrameworkCore.Tools**

- **Swashbuckle.ASPNetCore**

Your **Installed** tab in Nuget Package Manager should look like this:

<p align="center">
    <img height=300 src="https://raw.githubusercontent.com/openauburn/api-v1/master/docs/assets/install-packages.png">
</p>

For more information on installing packages visit [Microsoft’s tutorial.](https://learn.microsoft.com/en-us/nuget/consume-packages/install-use-packages-visual-studio)

<br>

## Building the API

### Using dotnet CLI

Run the following command to build your open-auburn-api solution.

```bash
dotnet msbuild <path-to>open-auburn-api.sln
```

This will generate an executable dll in your project and give you a path to it.

### Using Visual Studio

Navigate to **********Build********** > **Build Solution** or hit Ctrl + Shift + B.

<p align="center">
    <img height=120 src="https://raw.githubusercontent.com/openauburn/api-v1/master/docs/assets/install-build.png">
</p>

<br>

## Running the API

### Using dotnet CLI

Use the path and dll file from the build and run the following command to start the OpenAuburn API.

```bash
dotnet <path-to>open-auburn-api.dll
```

### Using Visual Studio

For a quick start, start without debugging by either hitting Ctrl + F5 or pressing the outlined green run button.

<p align="center">
    <img height=120 src="https://raw.githubusercontent.com/openauburn/api-v1/master/docs/assets/install-run.png">
</p>

<br>

## Next Steps

Congratulations, your instance of the OpenAuburn API is running! Here are some next steps for expanding on our service:

- Adding an endpoint
- Adding controller methods
- Implementing a filter
- Formatting data models

You can also see high-level explanations of the file structure [here](https://github.com/openauburn/api-v1/tree/master/OpenAuburnAPI#readme).

<br>

## Troubleshooting

- Above all, ensure you have the [.NET 6.0 SDK](https://dotnet.microsoft.com/en-us/download/dotnet/6.0) installed on your machine. If you downloaded Visual Studio, it should automatically install it.
- If you cannot install the packages, ensure you typed their name correctly.
- If your project is not recognizing the packages, see the *.csproj file for the versions used in the project. Run the following command to install the exact versions.
    
    ```bash
    dotnet add package <package-name> --version <version>
    ```
    
- If your project fails to run, ensure you have an internet connection. The API must connect to the OpenAuburn database server through an internect connection.
- If you are experience database-related errors, make sure the user id and passwords in the SqlServer connection strings are up to date. You may also be IP-banned or unable to use those credentials. If you are unsure about whether or not you are authorized to access the database, contact an OpenAuburn member.
- If you are receiving permission-based database errors, make sure you have not implented POST, PUT, PATCH, or DELETE methods in your controllers. This API is **read-only** and does not have permission to write to the database.

If you have any other questions, suggestions, or just want to get in touch with us, join the OpenAuburn [Discord](https://discord.gg/jYwWzhWpxx).
